<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    # Tirex/mod_tile configuration
    ModTileTileDir /var/cache/tirex/tiles
    AddTileConfig /tile/ default
    ModTileRenderdSocketName /run/tirex/modtile.sock
    ModTileRequestTimeout 0
    ModTileMissingRequestTimeout 60
    ModTileMaxLoadOld 2
    ModTileMaxLoadMissing 5
    
    # Enable tile statistics
    ModTileEnableStats On
    
    # Cache settings
    ModTileCacheDurationMax 604800
    ModTileCacheDurationDirty 900
    ModTileCacheDurationMinimum 10800
    ModTileCacheDurationMediumZoom 13 86400
    ModTileCacheDurationLowZoom 9 518400
    ModTileCacheLastModifiedFactor 0.20

    DocumentRoot /var/www/html

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <IfDefine ALLOW_CORS>
        Header set Access-Control-Allow-Origin "*"
    </IfDefine>
    
    # Block internal commands
    RedirectMatch 404 /tile/.*/dirty
    RedirectMatch 404 /tile/.*/status
</VirtualHost>
